var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function a(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,n,a){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const a=t.subscribe(...n);return a.unsubscribe?()=>a.unsubscribe():a}(n,a))}function s(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode.removeChild(e)}function d(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function u(){return h(" ")}function m(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function f(e){return""===e?null:+e}function P(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function g(e,t){e.value=null==t?"":t}function y(e,t,n,a){e.style.setProperty(t,n,a?"important":"")}let b;function _(e){b=e}function S(e){(function(){if(!b)throw new Error("Function called outside component initialization");return b})().$$.on_mount.push(e)}const v=[],w=[],A=[],E=[],x=Promise.resolve();let O=!1;function R(e){A.push(e)}let T=!1;const N=new Set;function I(){if(!T){T=!0;do{for(let e=0;e<v.length;e+=1){const t=v[e];_(t),L(t.$$)}for(_(null),v.length=0;w.length;)w.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];N.has(t)||(N.add(t),t())}A.length=0}while(v.length);for(;E.length;)E.pop()();O=!1,T=!1,N.clear()}}function L(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(R)}}const D=new Set;function C(e,t){-1===e.$$.dirty[0]&&(v.push(e),O||(O=!0,x.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function U(r,o,s,c,d,h,u=[-1]){const m=b;_(r);const p=r.$$={fragment:null,ctx:null,props:h,update:e,not_equal:d,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let f=!1;if(p.ctx=s?s(r,o.props||{},((e,t,...n)=>{const a=n.length?n[0]:t;return p.ctx&&d(p.ctx[e],p.ctx[e]=a)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](a),f&&C(r,e)),t})):[],p.update(),f=!0,a(p.before_update),p.fragment=!!c&&c(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(l)}else p.fragment&&p.fragment.c();o.intro&&((P=r.$$.fragment)&&P.i&&(D.delete(P),P.i(g))),function(e,n,r){const{fragment:o,on_mount:s,on_destroy:c,after_update:l}=e.$$;o&&o.m(n,r),R((()=>{const n=s.map(t).filter(i);c?c.push(...n):a(n),e.$$.on_mount=[]})),l.forEach(R)}(r,o.target,o.anchor),I()}var P,g;_(m)}function k(e){return{enumerable:!0,value:e}}function q(e){return{enumerable:!0,writable:!0,value:e}}let F={},M=()=>!0,B=()=>({}),H=e=>e,$=(e,t,n,a)=>e.apply(n,a)&&t.apply(n,a),z=(e,t,n,[a,i])=>t.call(n,e.call(n,a,i),i),V=(e,t)=>Object.freeze(Object.create(e,t));function W(e,t,n){return e.reduce(((e,t)=>function(...a){return n(e,t,this,a)}),t)}function Y(e){return V(this,{fn:k(e)})}let X={},Q=Y.bind(X),J=e=>Q(((t,n)=>!!~e(t,n)&&t)),j={},G=Y.bind(j);function Z(e,t){return t.filter((t=>e.isPrototypeOf(t)))}function K(e,t,...n){let a=W(Z(j,n).map((e=>e.fn)),M,$),i=W(Z(X,n).map((e=>e.fn)),H,z);return V(this,{from:k(e),to:k(t),guards:k(a),reducers:k(i)})}let ee={},te={},ne=K.bind(ee),ae=K.bind(te,null);function ie(e,t,n){return me(t,e,n,this.immediates)||e}function re(e){let t=new Map;for(let n of e)t.has(n.from)||t.set(n.from,[]),t.get(n.from).push(n);return t}let oe={enter:H};function se(...e){let t=Z(ee,e),n=Z(te,e),a={final:k(0===e.length),transitions:k(re(t))};return n.length&&(a.immediates=k(n),a.enter=k(ie)),V(oe,a)}let ce={enter(e,t,n){return this.fn.call(t,t.context,n).then((e=>t.send({type:"done",data:e}))).catch((e=>t.send({type:"error",error:e}))),e}},le={enter(e,t,n){if(t.child=fe(this.machine,(e=>{t.onChange(e),t.child==e&&e.machine.state.value.final&&(delete t.child,t.send({type:"done",data:e.context}))}),t.context,n),t.child.machine.state.value.final){let n=t.child.context;return delete t.child,me(t,e,{type:"done",data:n},this.transitions.get("done"))}return e}};function de(e,...t){let n=k(re(t));return he.isPrototypeOf(e)?V(le,{machine:k(e),transitions:n}):V(ce,{fn:k(e),transitions:n})}let he={get state(){return{name:this.current,value:this.states[this.current]}}};function ue(e,t,n=B){return"string"!=typeof e&&(n=t||B,t=e,e=Object.keys(t)[0]),F._create&&F._create(e,t),V(he,{context:k(n),current:k(e),states:k(t)})}function me(e,t,n,a){let{context:i}=e;for(let{to:r,guards:o,reducers:s}of a)if(o(i,n)){e.context=s.call(e,i,n);let a=t.original||t,o=V(a,{current:k(r),original:{value:a}});return o.state.value.enter(o,e,n)}}let pe={send(e){this.machine=function(e,t){let n=t.type||t,{machine:a}=e,{value:i}=a.state;return i.transitions.has(n)&&me(e,a,t,i.transitions.get(n))||a}(this,e),this.onChange(this)}};function fe(e,t,n,a){let i=Object.create(pe,{machine:q(e),context:q(e.context(n,a)),onChange:k(t)});return i.send=i.send.bind(i),i.machine=i.machine.state.value.enter(i.machine,i,a),i}function Pe(e,t){throw new Error(`Cannot transition from ${e} to unknown state: ${t}`)}F._create=function(e,t){if(!(e in t))throw new Error(`Initial state [${e}] is not a known state.`);for(let e in t){let n=t[e];for(let[,a]of n.transitions)for(let{to:n}of a)n in t||Pe(e,n)}};const{fromCharCode:ge}=String,ye=e=>e.charCodeAt(0);function be(e,t){const n=new Uint8Array(t.data);return e.result=[],e.header=n,e.slot=n[5],e.processedBytes=0,e.bytesToProcess=n[8]+256*n[9],console.log(`Loading from slot: ${e.slot} - Expecting ${e.bytesToProcess} bytes (header: ${e.header})`),e}function _e(e,t){const n=new Uint8Array(t.data);return!!n&&(10===n.byteLength&&(243===n[0]&&(15===n[1]&&(171===n[2]&&(202===n[3]&&(1===n[4]&&(0===n[6]&&0===n[7])))))))}function Se(e,t){const n=new Uint8Array(t.data);return e.result.push(n),e.processedBytes+=n.byteLength,e}function ve(e){return e.processedBytes>=e.bytesToProcess}async function we(e){console.log("sendLoadRequest",e.port,"patchNumber",e.patchNumber);const t=new Uint8Array([243,15,171,202,0,e.patchNumber,0,0,0,0]);return e.port.send(t),!0}const Ae=ue({idle:se(ae("getHeader",J(we))),getHeader:se(ne("data","header",G(_e))),header:se(ae("read",Q(be))),read:se(ae("finished",G(ve)),ne("data","read",Q(Se))),finished:se()},(e=>({...e})));const Ee=ue({idle:se(ae("setHeader",Q((e=>{const t=new Uint8Array(e.patch);return{...e,processedBytes:0,bytesToProcess:t.byteLength,data:t,currentIteration:0}})))),setHeader:se(ae("write",J((async function(e){console.log("sendWriteRequest",e.port,"patchNumber",e.patchNumber);let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.bytesToProcess,!0);const n=new Uint8Array(t),a=new Uint8Array([243,15,171,202,1,e.patchNumber,0,0,n[0],n[1]]);return console.log("sending buffer",a,"ctx.bytesToProcess",e.bytesToProcess,"len.byteLength",n.byteLength,"len",n),e.port.send(a),!0})))),getDataFromPatch:se(ae("write",Q((e=>({...e}))))),write:se(ae("finished",G(ve)),ae("getDataFromPatch",J((async function(e){const t=64*e.currentIteration,n=t+64,a=e.data.slice(t,n);return e.port.send(a),e.currentIteration++,e.processedBytes+=a.byteLength,e})))),finished:se()},(e=>({...e}))),xe=ue({idle:se(ae("sendHeader",Q((e=>(e.patchNumber=0,e.bank=[],{...e}))))),sendHeader:se(ae("getHeader",J(we))),getHeader:se(ne("data","header",G(_e))),header:se(ae("read",Q(be))),read:se(ae("finished",G(ve)),ne("data","read",Q(Se))),nextPatch:se(ae("sendHeader",Q((e=>(e.patchNumber=e.patchNumber+1,{...e}))))),finished:se()},(e=>({...e}))),Oe=[];const Re=(t,n)=>{const a=fe(t,(e=>{a===e&&(console.log("[MachineStore] state",e.machine.current,"context",e.context),i.set({state:e.machine.current,context:e.context}))}),n),i=function(t,n=e){let a;const i=[];function o(e){if(r(t,e)&&(t=e,a)){const e=!Oe.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),Oe.push(n,t)}if(e){for(let e=0;e<Oe.length;e+=2)Oe[e][0](Oe[e+1]);Oe.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(r,s=e){const c=[r,s];return i.push(c),1===i.length&&(a=n(o)||e),r(t),()=>{const e=i.indexOf(c);-1!==e&&i.splice(e,1),0===i.length&&(a(),a=null)}}}}({state:t.current,context:a.context}),o=a.send;return{store:i,send:o,service:a}};class Te extends EventTarget{constructor(e){super(),this.device=e,this.interfaceNumber=0,this.endpointIn=0,this.endpointOut=0,this.queue=[],this.transferInflight=!1}onReceive(e){}onReceiveError(e){}setEndpoints(){let e=this.device.configuration.interfaces;console.log("Interfaces",this.device.configuration.interfaces),e.forEach((e=>{console.log("Element",e),e.alternates.forEach((t=>{255==t.interfaceClass&&(this.interfaceNumber=e.interfaceNumber,t.endpoints.forEach((e=>{"out"==e.direction&&(this.endpointOut=e.endpointNumber),"in"==e.direction&&(this.endpointIn=e.endpointNumber)})))}))})),0===this.endpointIn&&console.error("endpointIn is 0"),0===this.endpointOut&&console.error("endpointOut is 0")}async connect(){let e=async()=>{try{const t=await this.device.transferIn(this.endpointIn,64);this.onReceive(t.data),e()}catch(e){this.onReceiveError(e)}};try{if(await this.device.open(),null===this.device.configuration)return this.device.selectConfiguration(1);await this.setEndpoints(),console.log("Interface number:",this.interfaceNumber),console.log("Configuration:",this.device.configuration),await this.device.claimInterface(this.interfaceNumber);try{await this.device.selectAlternateInterface(this.interfaceNumber,this.endpointIn)}catch(e){}await this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:this.interfaceNumber}),e()}catch(e){throw console.error(e),e}}async disconnect(){return this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:0,index:this.interfaceNumber}).then((()=>this.device.close()))}send(e){return console.log("sending",e,this.endpointOut),this.device.transferOut(this.endpointOut,e)}queueMessage(e){if(queue.length>5e3)return console.warn("You have queued too many messages, have more chill");this.queue.push(e)}async processQueue(){if(0===this.queue.length)return;if(this.transferInflight)return;this.transferInflight=!0;const e=this.queue.shift();try{await this.send(e)}catch(t){console.error(t),this.queue.unshift(e)}this.transferInflight=!1}startQueue(){this.stopQueue(),this.queueInterval=setInterval(this.processQueue.bind(this),1)}stopQueue(){this.queueInterval&&clearInterval(this.queueInterval)}}const Ne=[{vendorId:9114},{vendorId:51966}];const Ie=["P_PWM","P_DRIVE","P_PITCH","P_OCT","P_GLIDE","P_INTERVAL","P_NOISE","P_MIXRESO","P_ROTATE","P_SCALE","P_MICROTUNE","P_STRIDE","P_SENS","P_A","P_D","P_S","P_R","P_ENV1_UNUSED","P_ENV_LEVEL1","P_A2","P_D2","P_S2","P_R2","P_ENV2_UNUSED","P_DLSEND","P_DLTIME","P_DLRATIO","P_DLWOB","P_DLFB","P_TEMPO","P_RVSEND","P_RVTIME","P_RVSHIM","P_RVWOB","P_RVUNUSED","P_SWING","P_ARPONOFF","P_ARPMODE","P_ARPDIV","P_ARPPROB","P_ARPLEN","P_ARPOCT","P_LATCHONOFF","P_SEQMODE","P_SEQDIV","P_SEQPROB","P_SEQLEN","P_GATE_LENGTH","P_SMP_POS","P_SMP_GRAINSIZE","P_SMP_RATE","P_SMP_TIME","P_SAMPLE","P_SEQPAT","P_JIT_POS","P_JIT_GRAINSIZE","P_JIT_RATE","P_JIT_PULSE","P_JIT_UNUSED","P_SEQSTEP","P_ASCALE","P_AOFFSET","P_ADEPTH","P_AFREQ","P_ASHAPE","P_AWARP","P_BSCALE","P_BOFFSET","P_BDEPTH","P_BFREQ","P_BSHAPE","P_BWARP","P_XSCALE","P_XOFFSET","P_XDEPTH","P_XFREQ","P_XSHAPE","P_XWARP","P_YSCALE","P_YOFFSET","P_YDEPTH","P_YFREQ","P_YSHAPE","P_YWARP","P_MIXSYNTH","P_MIXWETDRY","P_MIXHPF","P_MIX_UNUSED","P_CV_QUANT","P_HEADPHONE","P_MIXINPUT","P_MIXINWETDRY","P_SYS_UNUSED1","P_SYS_UNUSED2","P_SYS_UNUSED3","P_ACCEL_SENS"],Le=[{id:"P_PWM",min:-100,max:100,type:"int16",offset:0,cc:13,name:"Shape",description:"Controls the shape of the oscillators in Plinky. When exactly 0%, you get 4 sawtooths per voice. When positive, you blend smoothly through 16 ROM wavetable shapes, (2 per voice,) provided by @miunau. When negative, you get PWM control of pulse/square shapes, (also 2 per voice.) CV and internal modulation only work either positive or negative: you can blend through the wavetables when the parameter is over 0, or you can modulate pulse/square waves when the value is negative. You cant cross through zero. Plinky pans each set of oscillators, (and the sample grains) a little giving the sound a rich stereo field. With the 4 saws at position 0, we have 2 oscilators panned left and 2 panned right. With the wavetable and pulse oscilators 1 is panned left and 1 is panned right."},{id:"P_DRIVE",min:-1024,max:1024,cc:4,name:"Drive",description:"Drive/Saturation. When turned up high, the saturation unit will create guitar-like tones, especially when playing polyphonically. It can also be used to compensate for changes in volume, for example if the Sensitivity parameter is low."},{id:"P_PITCH",min:-1024,max:1024,cc:9,name:"Pitch",description:"Use this to (fine) tune plinky. Range is 1 octave up or down, unquantized."},{id:"P_OCT",min:-1024,max:1024,cc:-1,name:"Octave",description:"Use this to quickly change pitch, quantised to octaves."},{id:"P_GLIDE",min:0,max:127,cc:5,name:"Glide",description:"Controls the speed of the portamento between notes in a single voice. Higher = slower"},{id:"P_INTERVAL",min:0,max:127,cc:14,name:"Interval",description:"Each voice has several oscillators, and this sets a fixed interval between them, from +1 to -1 octaves."},{id:"P_NOISE",min:-127,max:127,cc:2,name:"Noise",description:"Each voice can add a variable amount of white noise to the oscillator, before the low-pass gate."},{id:"P_MIXRESO",min:0,max:127,cc:71,name:"Resonance",description:"Each voice has a 2-pole lowpass gate controlled by your finger pressure and the Sensitivity control. This parameter adds resonance to the filter. Note that at high levels of resonance, you may wish to adjust the drive or the high pass filter paramters."},{id:"P_ROTATE",min:0,max:127,cc:-1,name:"Degree",description:"Think of this as a quantized pitch control, that transposes plinky in such a way that all the notes stay in the same scale. In other words, it changes which degree of the scale is played, but not the root of the scale itself."},{id:"P_SCALE",min:0,max:26,cc:-1,name:"Scale",enum_id:["S_MAJOR","S_MINOR","S_HARMMINOR","S_PENTA","S_PENTAMINOR","S_HIRAJOSHI","S_INSEN","S_IWATO","S_MINYO","S_FIFTHS","S_TRIADMAJOR","S_TRIADMINOR","S_DORIAN","S_PHYRGIAN","S_LYDIAN","S_MIXOLYDIAN","S_AEOLIAN","S_LOCRIAN","S_BLUESMINOR","S_BLUESMAJOR","S_ROMANIAN","S_WHOLETONE","S_HARMONICS","S_HEXANY","S_JUST","S_CHROMATIC","S_LAST"],enum_name:["Major","Minor","Harminoc Min","Penta Maj","Penta Min","Hirajoshi","Insen","Iwato","Minyo","Fifths","Triad Maj","Triad Min","Dorian","Phrygian","Lydian","Mixolydian","Aeolian","Locrian","Blues Min","Blues Maj","Romanian","Wholetone","Harmonics","Hexany","Just","Chromatic"],description:"Selects which scale of notes plinky uses"},{id:"P_MICROTUNE",min:0,max:127,cc:-1,name:"Microtune",description:"Controls how much vertical movement of your finger detunes the note. This also thickens the sound through 'unison' detuning of the individual oscillators in each note, so values above 0 are recommended."},{id:"P_STRIDE",min:0,max:127,cc:-1,name:"Stride",description:"Controls the interval, in semitones, between each column of plinky. It defaults to 7 semitones, a perfect fifth, like a Cello or Violin. The notes are always snapped to the chosen scale, even if the stride calls for chromatic notes, so plinky does its best to choose column pitches that follow this stride while staying in-scale."},{id:"P_SENS",min:0,max:1,default:.5,cc:3,name:"Sensitivity",description:"Master sensitivty, controlling the mapping of finger pressure to the opening/closing of each voice's low-pass gate. If you are looking for a lowpass cutoff frequency, this is the parameter you want."},{id:"P_A",min:0,max:127,cc:73,name:"Attack",description:"Attack time for the main envelope that controls the lowpass gate. The peak level is set by the pressure of your finger, modulated by the Sensitivity parameter."},{id:"P_D",min:0,max:127,cc:75,name:"Decay",description:"Decay time for the main envelope that controls the lowpass gate."},{id:"P_S",min:0,max:127,cc:74,name:"Sustain",description:"Sustain level for the main envelope that controls the lowpass gate."},{id:"P_R",min:0,max:127,cc:72,name:"Release",description:"Release time for the main envelope that controls the lowpass gate."},{id:"P_ENV1_UNUSED",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_ENV_LEVEL",min:0,max:127,cc:19,name:"Env 2 Level",description:"Sets the peak level of the second envelope, which can be used as a modulation source."},{id:"P_A2",min:0,max:127,cc:20,name:"Attack 2",description:"Attack time of the second envelope, which can be used as a modulation source."},{id:"P_D2",min:0,max:127,cc:21,name:"Decay 2",description:"Decay time of the second envelope, which can be used as a modulation source."},{id:"P_S2",min:0,max:127,cc:22,name:"Sustain 2",description:"Sustain level of the second envelope, which can be used as a modulation source."},{id:"P_R2",min:0,max:127,cc:23,name:"Release 2",description:"Release time of the second envelope, which can be used as a modulation source."},{id:"P_ENV2_UNUSED",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_DLSEND",min:0,max:1,default:0,cc:94,name:"Delay Send",description:"Amount of the dry sound sent to the delay unit. Turn it up for echos!"},{id:"P_DLTIME",min:-1,max:1,default:.375,cc:12,name:"Delay Time",description:"The time between each echo. Positive values are un-quantized; negative values are multiples of the current tempo."},{id:"P_DLRATIO",min:0,max:1,default:1,cc:-1,name:"Delay Ratio",description:"The delay unit is stereo. This moves the right tap to an earlier time, causing ping-pong poly-rhthmic repeats. Try simple ratios like 33%, 50%, 75%."},{id:"P_DLWOB",min:0,max:1,default:.25,name:"Delay Wobble",cc:-1,description:"Amount of simulated tape speed wobble, causing pitch distortions in the delay."},{id:"P_DLFB",min:0,max:1,default:.5,name:"Delay Feedback",cc:95,description:"Amount of feedback - the volume of each echo reduces by this amount."},{id:"P_TEMPO",min:-1,max:1,name:"BPM",remap:"120*Math.pow(2,x)",default:0,cc:-1,description:"Tempo in BPM. You can also tap this parameter pad rhythmically to set the tempo."},{id:"P_RVSEND",min:0,max:1,name:"Reverb Send",default:.25,cc:91,description:"Amount of the dry sound sent to the reverb unit. Turn it up for reverb!"},{id:"P_RVTIME",min:0,max:1,default:.5,name:"Reverb Time",cc:92,description:"Reverb time. controls the length of the decay of the reverb."},{id:"P_RVSHIM",min:0,max:1,default:.25,name:"Shimmer",cc:93,description:"Amount of octave-up signal that is fed into the reverb, causing a shimmer effect."},{id:"P_RVWOB",min:0,max:1,default:.25,name:"Reverb Wobble",cc:-1,description:"Amount of simulated tape speed wobble, causing pitch distortions in the reverb. Avoids metallic artefacts."},{id:"P_RVUNUSED",min:0,max:1,cc:-1,description:"unused parameter slot"},{id:"P_SWING",min:0,max:1,cc:-1,name:"Swing",description:"OUT OF ORDER. This parameter will be used to add swing in a future firmware update"},{id:"P_ARPONOFF",min:0,max:1,cc:102,default:0,name:"Arp on/off",description:"Switches the arpeggiator on and off."},{id:"P_ARPMODE",cc:103,default:0,min:0,max:15,name:"Arpeggiator Mode",enum_id:["ARP_UP","ARP_DOWN","ARP_UPDOWN","ARP_UPDOWNREP","ARP_PEDALUP","ARP_PEDALDOWN","ARP_PEDALUPDOWN","ARP_RANDOM","ARP_RANDOM2","ARP_ALL","ARP_UP8","ARP_DOWN8","ARP_UPDOWN8","ARP_RANDOM8","ARP_RANDOM28","ARP_LAST"],enum_name:["Up","Down","Up then Down","Up then Down (repeat end notes)","Up with lowest note pedal","Down with lowest note pedal","Up then down with lowest note pedal","Random","Random playing 2 notes at a time","Repeat all notes (polyphonic)","Up (all 8 columns)","Down (all 8 columns)","Up then Down (all 8 columns)","Random (all 8 columns)","Random, 2 notes at a time (all 8 columns)"],description:"Arpeggiator mode. The '8 column' modes include every column, even those without a note, introducing rests into the arpeggio."},{id:"P_ARPDIV",min:-1,max:22,default:.09090909,name:"Arp Clock Divide",enum_id:["1","2","3","4","5","6","8","10","12","16","20","24","32","40","48","64","80","96","128","160","192","256"],enum_name:["1/32","2/32","3/32","4/32","5/32","6/32","8/32","10/32","12/32","16/32","20/32","24/32","32/32","40/32","48/32","64/32","80/32","96/32","128/32","160/32","192/32","256/32"],cc:-1,description:"Sets the speed of the arpeggiator. Negative numbers are un-quantized, positive numbers divide a 32nd note clock."},{id:"P_ARPPROB",min:0,max:1,default:1,cc:-1,name:"Arp Probability / Density",description:"Sets the probability of the apreggiator progressing on each tick of its clock. If the Arp Length parameter is 0, this is a true random probability, otherwise it's the density of a Euclidean rhythm."},{id:"P_ARPLEN",min:-17,max:17,default:8,cc:-1,name:"Arp Pattern Length",description:"When non zero, this sets the length of the euclidean pattern used by the arp. Use the Arp probability parameter to change how many note are included in each pattern. Negative values treat rests differently, try both."},{id:"P_ARPOCT",min:0,max:4,default:0,cc:-1,name:"Arp Octaves",description:"Sets how many octaves the arpeggiator ranges over."},{id:"P_LATCHONOFF",min:0,max:1,name:"Latch on/off",cc:-1,description:"Switches the latch on/off. When on, played notes will sustain even when you take your fingers off plinky. Useful for chords, arps, drones, or using plinky as an oscillator voice."},{id:"P_SEQMODE",min:0,max:6,name:"Sequencer Mode",default:0,enum_id:["SEQ_PAUSE","SEQ_FWD","SEQ_BACK","SEQ_PINGPONG","SEQ_PINGPONGREP","SEQ_RANDOM","SEQ_LAST"],enum_name:["Pause","Forwards","Backwards","Pingpong","Pingpong (repeat end notes)","Random"],cc:-1,description:"Sets the order that notes are played by the sequencer."},{id:"P_SEQDIV",min:0,max:22,default:.27272727,name:"Seq Clock Divide",enum_id:["1","2","3","4","5","6","8","10","12","16","20","24","32","40","48","64","80","96","128","160","192","256"],enum_name:["1/32","2/32","3/32","4/32","5/32","6/32","8/32","10/32","12/32","16/32","20/32","24/32","32/32","40/32","48/32","64/32","80/32","96/32","128/32","160/32","192/32","256/32"],cc:-1,description:"Sets the speed of the sequencer. Negative numbers are un-quantized, positive numbers divide a 32nd note clock."},{id:"P_SEQPROB",min:0,max:1,default:1,cc:-1,name:"Seq Probability / Density",description:"Sets the probability of the sequencer progressing on each tick of its clock. If the Arp Length parameter is 0, this is a true random probability, otherwise it's the density of a Euclidean rhythm."},{id:"P_SEQLEN",min:-17,max:17,default:8,cc:-1,name:"Seq Pattern Length",description:"When non zero, this sets the length of the euclidean pattern used by the sequencer. Use the Seq Probability parameter to change how many note are included in each pattern. Negative values treat rests differently, try both."},{id:"P_GATE_LENGTH",min:0,max:127,cc:11,name:"Gate length",description:"Sets the length of the gate of each step. The gate is the signal that determines whether a note is on or off. Longer gates means notes are played longer, which (in tandem with Envelope 1) determines how long notes are sustained."},{id:"P_SMP_POS",min:0,max:127,cc:15,name:"Sample position",description:"Controls the starting point of the sample playback, relative to the slice point. If you modulate this parameter you get dynamic slicing."},{id:"P_SMP_GRAINSIZE",min:0,max:127,cc:16,name:"Grain size",description:"Sets the size of the grains. Modulate to achieve granular sound effects."},{id:"P_SMP_RATE",min:0,max:127,cc:17,name:"Sample playback rate",description:"Determines at what relative speed the sample is played back, eg. 50% slows the sample down by a factor of 2, 200% speeds up the sample twice. Playback speed affects the pitch of the sample accordingly, slowing the sample down pitches it down, speeding up also pitches up."},{id:"P_SMP_TIME",min:0,max:127,cc:18,name:"Sample playback time",description:"Determines at what relative speed the sample is played back, but without changing the pitch. As the sample is cut up in miniscule ‘grains’ of audio (milliseconds), Plinky repeats some of these grains to slow down, and leaves some grains out to speed up. Changes in grain size have more drastic effects when samples are stretched severely. "},{id:"P_SAMPLE",min:0,max:127,cc:82,name:"Sample #",description:"Controls which sample is being played, allowing you to change samples from within a preset by assigning a LFO or CV source to this parameter."},{id:"P_SEQPAT",min:0,max:127,cc:83,name:"Sequencer pattern #",description:"Controls which sequencer pattern is being played back, allowing you to change patterns from within a preset by assigning an LFO or CV source to this parameter. If you add a slow rising saw to this parameter you can chain various patterns together. "},{id:"P_JIT_POS",min:0,max:127,cc:-1,name:"Sample position jitter",description:"Adds an amount of randomness to the sample playback position."},{id:"P_JIT_GRAINSIZE",min:0,max:127,cc:-1,name:"Grain size jitter",description:"Adds an amount of randomness to the sample grain size."},{id:"P_JIT_RATE",min:0,max:127,cc:-1,name:"Sample speed jitter",description:"Adds an amount of randomness to the sample playback speed."},{id:"P_JIT_PULSE",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_JIT_UNUSED",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_SEQSTEP",min:0,max:127,cc:85,name:"Pattern offset",description:"Offsets the starting point of the sequencer pattern allowing for variations in sequencer playback."},{id:"P_ASCALE",min:0,max:127,cc:-1,name:"A scale",description:"An attenuator for the signal coming from the corresponding CV input jacks."},{id:"P_AOFFSET",min:0,max:127,cc:24,name:"A offset",description:"Offsets the CV and/or LFO. This is a constant voltage that is being added (or subtracted) from the sum of the CV input and the LFO."},{id:"P_ADEPTH",min:0,max:127,cc:25,name:"A depth",description:"Attenuator for the internal LFO's.The default value is zero so turn this up for LFO's."},{id:"P_AFREQ",min:0,max:127,cc:26,name:"A rate",description:"Controls the rate of the internal LFO. The LFO rates can range from 20 sceonds (at +100%) to milliseconds at -100%."},{id:"P_ASHAPE",min:0,max:127,cc:-1,name:"A shape",description:"Sets the shape of the LFO. The following shapes are available; Triangle, Sine, SmthRnd (Smooth Random), StepRnd (Stepped Random), BiSquare (Bipolar Square wave), Square (Unipolar Square wave), Castle (looks like a sandcastle), BiTrigs (Bipolar Trigger pulses), Trigs (Unipolar Trigger Pulses), Env."},{id:"P_AWARP",min:0,max:127,cc:-1,name:"A warp",description:"Sets the slope of the LFO shape - for example turning a triangle wave into a sharp ramp up (symmetry +100) or down (symmetry -100). "},{id:"P_BSCALE",min:0,max:127,cc:-1,name:"B scale",description:"An attenuator for the signal coming from the corresponding CV input jacks."},{id:"P_BOFFSET",min:0,max:127,cc:27,name:"B offset",description:"Offsets the CV and/or LFO. This is a constant voltage that is being added (or subtracted) from the sum of the CV input and the LFO."},{id:"P_BDEPTH",min:0,max:127,cc:28,name:"B depth",description:"Attenuator for the internal LFO's.The default value is zero so turn this up for LFO's."},{id:"P_BFREQ",min:0,max:127,cc:29,name:"B rate",description:"Controls the rate of the internal LFO. The LFO rates can range from 20 sceonds (at +100%) to milliseconds at -100%."},{id:"P_BSHAPE",min:0,max:127,cc:-1,name:"B shape",description:"Sets the shape of the LFO. The following shapes are available; Triangle, Sine, SmthRnd (Smooth Random), StepRnd (Stepped Random), BiSquare (Bipolar Square wave), Square (Unipolar Square wave), Castle (looks like a sandcastle), BiTrigs (Bipolar Trigger pulses), Trigs (Unipolar Trigger Pulses), Env."},{id:"P_BWARP",min:0,max:127,cc:-1,name:"B warp",description:"Sets the slope of the LFO shape - for example turning a triangle wave into a sharp ramp up (symmetry +100) or down (symmetry -100). "},{id:"P_XSCALE",min:0,max:127,cc:-1,name:"X scale",description:"An attenuator for the signal coming from the corresponding CV input jacks."},{id:"P_XOFFSET",min:0,max:127,cc:78,name:"X offset",description:"Offsets the CV and/or LFO. This is a constant voltage that is being added (or subtracted) from the sum of the CV input and the LFO."},{id:"P_XDEPTH",min:0,max:127,cc:77,name:"X depth",description:"Attenuator for the internal LFO's.The default value is zero so turn this up for LFO's."},{id:"P_XFREQ",min:0,max:127,cc:76,name:"X rate",description:"Controls the rate of the internal LFO. The LFO rates can range from 20 sceonds (at +100%) to milliseconds at -100%."},{id:"P_XSHAPE",min:0,max:127,cc:-1,name:"X shape",description:"Sets the shape of the LFO. The following shapes are available; Triangle, Sine, SmthRnd (Smooth Random), StepRnd (Stepped Random), BiSquare (Bipolar Square wave), Square (Unipolar Square wave), Castle (looks like a sandcastle), BiTrigs (Bipolar Trigger pulses), Trigs (Unipolar Trigger Pulses), Env."},{id:"P_XWARP",min:0,max:127,cc:-1,name:"X warp",description:"Sets the slope of the LFO shape - for example turning a triangle wave into a sharp ramp up (symmetry +100) or down (symmetry -100). "},{id:"P_YSCALE",min:0,max:127,cc:-1,name:"Y scale",description:"An attenuator for the signal coming from the corresponding CV input jacks."},{id:"P_YOFFSET",min:0,max:127,cc:81,name:"Y offset",description:"Offsets the CV and/or LFO. This is a constant voltage that is being added (or subtracted) from the sum of the CV input and the LFO."},{id:"P_YDEPTH",min:0,max:127,cc:80,name:"Y depth",description:"Attenuator for the internal LFO's.The default value is zero so turn this up for LFO's."},{id:"P_YFREQ",min:0,max:127,cc:79,name:"Y rate",description:"Controls the rate of the internal LFO. The LFO rates can range from 20 sceonds (at +100%) to milliseconds at -100%."},{id:"P_YSHAPE",min:0,max:127,cc:-1,name:"Y shape",description:"Sets the shape of the LFO. The following shapes are available; Triangle, Sine, SmthRnd (Smooth Random), StepRnd (Stepped Random), BiSquare (Bipolar Square wave), Square (Unipolar Square wave), Castle (looks like a sandcastle), BiTrigs (Bipolar Trigger pulses), Trigs (Unipolar Trigger Pulses), Env."},{id:"P_YWARP",min:0,max:127,cc:-1,name:"Y warp",description:"Sets the slope of the LFO shape - for example turning a triangle wave into a sharp ramp up (symmetry +100) or down (symmetry -100). "},{id:"P_MIXSYNTH",min:0,max:127,cc:7,name:"Synth level",description:"Sets the gain level of Plinky's synth / sampler. Above 50% you will start hitting a limiter, which can help to glue patches with wide dynamic range together. You can use this as a volume control if you are taking audio from the left / mono output."},{id:"P_MIXWETDRY",min:0,max:127,cc:8,name:"Synth wet/dry",description:"Sets the balance between the dry signal of Plinky's voice (synth or sampler) and the wet signal of the Reverb and Delay units (the distortion/saturation device is applied directly to the 8 individual voices.) The default setting is zero where there is an equal mix of wet and dry signals. 100 is completely wet and -100 is completely dry."},{id:"P_MIXHPF",min:0,max:127,cc:21,name:"HPF",description:"After the synth/sampler, external audio and the effects are mixed, they pass through a High Pass Filter. This parameter controls the cut off frequency."},{id:"P_MIX_UNUSED",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_CV_QUANT",min:0,max:127,cc:-1,name:"Pitch quantisation",description:"Plinky’s pitch input is most useful when you have a sequence or latched note playing; the pitch is transposed according to the pitch CV input (1 volt per octave), and you can use this last parameter to choose if the transposition is unquantized, quantized to semitones, or transposed in-scale. 0v (C0) means no transposition."},{id:"P_HEADPHONE",min:0,max:127,cc:-1,name:"Headphone level",description:"Sets the level of the final output stage for the headphone out. Turn this up to 11."},{id:"P_MIXINPUT",min:0,max:127,cc:89,name:"Input level",description:"Sets the gain level of Plinky's inputs. These inputs take line level signals and amplify them to Eurorack levels, but... If you feed it eurorack level, the analog saturation unit in Plinky V2 does it's thing. In case both the inputs on the face plate and the front/back side are used, Plinky mixes the inputs at fixed levels."},{id:"P_MIXINWETDRY",min:0,max:127,cc:90,name:"Input wet/dry",description:"Sets the balance between the dry signal of the audio inputs and the wet signal passing through the Reverb and Delay units."},{id:"P_SYS_UNUSED1",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_SYS_UNUSED2",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_SYS_UNUSED3",min:0,max:127,cc:-1,description:"unused parameter slot"},{id:"P_SYS_UNUSED4",min:0,max:127,cc:-1,description:"unused parameter slot"}];class De{constructor(e){Object.assign(this,e),this.mods={get env(){return e.arr[1]},set env(t){e.arr[1]=t},get pressure(){return e.arr[2]},set pressure(t){e.arr[2]=t},get a(){return e.arr[3]},set a(t){e.arr[3]=t},get b(){return e.arr[4]},set b(t){e.arr[4]=t},get x(){return e.arr[5]},set x(t){e.arr[5]=t},get y(){return e.arr[6]},set y(t){e.arr[6]=t},get random(){return e.arr[7]},set random(t){e.arr[7]=t}}}get value(){return this.arr[0]}set value(e){this.arr[0]=e}}class Ce{constructor(e){this.buffer=e,this.params=[],this.name="",this.category="",Ie.forEach(((t,n)=>{const a=new Int16Array(e,16*n,16),i=(r=t,Le.find((e=>e.id===r))||{name:t,id:t});var r;this.params.push(new De({...i,arr:a}))})),this.bitFieldUInt8=new Uint8Array(e,e.byteLength-16,16),this.bitFieldInt8=new Int8Array(e,e.byteLength-16,16)}get arp(){return(1&this.bitFieldUInt8[0])>0}get latch(){return(2&this.bitFieldUInt8[0])>0}get loopStart(){return this.bitFieldInt8[1]}get loopLength(){return this.bitFieldInt8[2]}updateBuffer(e){}setData(e,t){}}function Ue(e){return window.patchBUFF=e,new Ce(e)}class ke extends Te{onReceive(e){console.log("Port data:",e.buffer);const{service:t}=Fe;t.child?t.child.send({type:"data",data:e.buffer}):t.send({type:"data",data:e.buffer})}onReceiveError(e){console.error("Port error:",e);const{service:t}=Fe;t.child?t.child.send({type:"error",data:e}):t.send({type:"error",data:e})}}async function qe(e){try{return e.port=await class{constructor(){}static async getPorts(e){return navigator.usb.getDevices().then((t=>t.map((t=>e?new e(t):new Port(t)))))}static async requestPort(e){return navigator.usb.requestDevice({filters:Ne}).then((t=>new e?new e(t):new Port(t)))}}.requestPort(ke),await e.port.connect(),e}catch(e){throw e}}const Fe=function(e={}){const t=ue({disconnected:se(ne("connect","connecting"),ne("parsePatch","disconnected",Q(((e,t)=>{if(t.patch){const n=t.patch,a=n.buffer.slice(n.byteOffset,n.byteLength+n.byteOffset),i=Ue(a);return{...e,patchJSON:i,patch:a}}return{...e}})))),connecting:de(qe,ne("done","connected"),ne("error","error",Q(((e,t)=>({...e,error:t.error}))))),connected:se(ne("loadPatch","loadPatch",Q(((e,t)=>({...e,patchNumber:t.patchNumber})))),ne("savePatch","savePatch"),ne("clearPatch","clearPatch"),ne("error","error",Q(((e,t)=>({...e,error:t.error}))))),clearPatch:se(ae("connected",Q((e=>(e.patch=null,e.patchJSON={},{...e}))))),loadPatch:de(Ae,ne("done","connected",Q(((e,t)=>{const n=Uint8Array.from(Array.prototype.concat(...t.data.result.map((e=>Array.from(e))))),a=n.buffer.slice(n.byteOffset,n.byteLength+n.byteOffset);return{...e,patch:a,patchJSON:Ue(a)}}))),ne("error","error",Q(((e,t)=>({...e,error:t.error}))))),savePatch:de(Ee,ne("done","connected"),ne("error","error",Q(((e,t)=>({...e,error:t.error}))))),loadBank:de(xe,ne("done","connected",Q(((e,t)=>{const n=Uint8Array.from(Array.prototype.concat(...t.data.result.map((e=>Array.from(e))))),a=n.buffer.slice(n.byteOffset,n.byteLength+n.byteOffset);return{...e,patch:a,patchJSON:Ue(a)}}))),ne("error","error",Q(((e,t)=>({...e,error:t.error}))))),error:se(ne("connect","connecting",Q((e=>(e.error=null,{...e})))))},(e=>({...e}))),n=Array(32).fill().map(((e,t)=>({number:t,path:null})));return Re(t,Object.assign(e,{port:null,patch:null,bank:n,patchJSON:{}}))}({patchNumber:0});function Me(e,t,n){const a=e.slice();return a[20]=t[n],a}function Be(e){let t,n,a=e[0].context.error+"";return{c(){t=d("p"),n=h(a),p(t,"class","error")},m(e,a){c(e,t,a),s(t,n)},p(e,t){1&t&&a!==(a=e[0].context.error+"")&&P(n,a)},d(e){e&&l(t)}}}function He(e){let t;return{c(){t=d("p"),t.innerHTML='You need the 0.9l firmware (or newer) to use this!<br/><a href="https://plinkysynth.com/firmware">Download here!</a>'},m(e,n){c(e,t,n)},d(e){e&&l(t)}}}function $e(t){let n;return{c(){n=d("p"),n.textContent="No patch in browser memory"},m(e,t){c(e,n,t)},p:e,d(e){e&&l(n)}}}function ze(e){let t,n,a,i,r,o,f,g,y,b,_,S,v,w,A,E,x,O,R,T,N,I,L,D,C,U,k,q,F,M,B,H,$,z,V=e[0].context.patch.byteLength+"",W=e[0].context.patchJSON.arp+"",Y=e[0].context.patchJSON.latch+"",X=e[0].context.patchJSON.loopStart+"",Q=e[0].context.patchJSON.loopLength+"",J=e[0].context.patchJSON.params,j=[];for(let t=0;t<J.length;t+=1)j[t]=Ve(Me(e,J,t));return{c(){t=d("p"),t.textContent="This is the patch that has been loaded into the browser's memory.",n=u(),a=d("button"),a.textContent="Clear patch in browser memory",i=u(),r=d("p"),o=h("Loaded: "),f=h(V),g=h(" bytes"),y=u(),b=d("h3"),b.textContent="Link to patch",_=u(),S=d("label"),S.textContent="Link:",v=u(),w=d("input"),A=u(),E=d("h3"),E.textContent="Params",x=u(),O=d("p"),R=h("Arp: "),T=h(W),N=d("br"),I=h("\n\t\t\tLatch: "),L=h(Y),D=d("br"),C=h("\n\t\t\tLoop start: "),U=h(X),k=d("br"),q=h("\n\t\t\tLoop length: "),F=h(Q),M=d("br"),B=u(),H=d("ul");for(let e=0;e<j.length;e+=1)j[e].c();p(a,"class","svelte-1rz8qbw"),p(S,"for","i-link-url"),p(w,"class","link svelte-1rz8qbw"),w.value=e[4],p(w,"id","i-link-url"),p(H,"class","params svelte-1rz8qbw")},m(l,d){c(l,t,d),c(l,n,d),c(l,a,d),c(l,i,d),c(l,r,d),s(r,o),s(r,f),s(r,g),c(l,y,d),c(l,b,d),c(l,_,d),c(l,S,d),c(l,v,d),c(l,w,d),c(l,A,d),c(l,E,d),c(l,x,d),c(l,O,d),s(O,R),s(O,T),s(O,N),s(O,I),s(O,L),s(O,D),s(O,C),s(O,U),s(O,k),s(O,q),s(O,F),s(O,M),c(l,B,d),c(l,H,d);for(let e=0;e<j.length;e+=1)j[e].m(H,null);var h;$||(z=m(a,"click",(h=e[9],function(e){return e.preventDefault(),h.call(this,e)})),$=!0)},p(e,t){if(1&t&&V!==(V=e[0].context.patch.byteLength+"")&&P(f,V),16&t&&w.value!==e[4]&&(w.value=e[4]),1&t&&W!==(W=e[0].context.patchJSON.arp+"")&&P(T,W),1&t&&Y!==(Y=e[0].context.patchJSON.latch+"")&&P(L,Y),1&t&&X!==(X=e[0].context.patchJSON.loopStart+"")&&P(U,X),1&t&&Q!==(Q=e[0].context.patchJSON.loopLength+"")&&P(F,Q),1025&t){let n;for(J=e[0].context.patchJSON.params,n=0;n<J.length;n+=1){const a=Me(e,J,n);j[n]?j[n].p(a,t):(j[n]=Ve(a),j[n].c(),j[n].m(H,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=J.length}},d(e){e&&l(t),e&&l(n),e&&l(a),e&&l(i),e&&l(r),e&&l(y),e&&l(b),e&&l(_),e&&l(S),e&&l(v),e&&l(w),e&&l(A),e&&l(E),e&&l(x),e&&l(O),e&&l(B),e&&l(H),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(j,e),$=!1,z()}}}function Ve(e){let t,n,a,i,r,o,m,f,g,y,b,_,S,v,w,A,E,x,O,R,T,N,I,L,D,C,U,k,q,F,M,B,H,$,z,V,W,Y,X,Q,J,j,G,Z,K,ee,te,ne,ae,ie,re,oe,se,ce,le,de,he,ue,me,pe,fe,Pe,ge,ye,be,_e,Se,ve,we,Ae,Ee,xe,Oe,Re,Te,Ne,Ie,Le,De,Ce,Ue,ke,qe,Fe,Me,Be,He,$e,ze=e[20].name+"",Ve=e[20].id+"",We=e[20].value+"",Qe=Array.from(new Uint8Array(e[20].buffer)).map(Xe)+"",Je=new Uint8Array(e[20].buffer).toString()+"",je=Ye(e[10](e[20].value))+"",Ge=Ye(e[10](e[20].mods.env))+"",Ze=Ye(e[10](e[20].mods.pressure))+"",Ke=Ye(e[10](e[20].mods.a))+"",et=Ye(e[10](e[20].mods.b))+"",tt=Ye(e[10](e[20].mods.x))+"",nt=Ye(e[10](e[20].mods.y))+"",at=Ye(e[10](e[20].mods.random))+"",it=e[20].description+"";return{c(){t=d("li"),n=d("h3"),a=h(ze),i=u(),r=d("code"),o=h("id: "),m=h(Ve),f=d("br"),g=h("\n\t\t\t\t\t\tval "),y=h(We),b=d("br"),_=h("\n\t\t\t\t\t\thex "),S=h(Qe),v=d("br"),w=h("\n\t\t\t\t\t\tdec "),A=h(Je),E=u(),x=d("div"),O=d("table"),R=d("tr"),T=d("td"),T.textContent="Base",N=u(),I=d("td"),L=h(je),D=h("%"),C=d("br"),U=u(),k=d("tr"),q=d("td"),q.textContent="Env",F=u(),M=d("td"),B=h(Ge),H=h("%"),$=d("br"),z=u(),V=d("tr"),W=d("td"),W.textContent="Pressure",Y=u(),X=d("td"),Q=h(Ze),J=h("%"),j=d("br"),G=u(),Z=d("tr"),K=d("td"),K.textContent="A",ee=u(),te=d("td"),ne=h(Ke),ae=h("%"),ie=d("br"),re=u(),oe=d("table"),se=d("tr"),ce=d("td"),ce.textContent="B",le=u(),de=d("td"),he=h(et),ue=h("%"),me=d("br"),pe=u(),fe=d("tr"),Pe=d("td"),Pe.textContent="X",ge=u(),ye=d("td"),be=h(tt),_e=h("%"),Se=d("br"),ve=u(),we=d("tr"),Ae=d("td"),Ae.textContent="Y",Ee=u(),xe=d("td"),Oe=h(nt),Re=h("%"),Te=d("br"),Ne=u(),Ie=d("tr"),Le=d("td"),Le.textContent="Random",De=u(),Ce=d("td"),Ue=h(at),ke=h("%"),qe=d("br"),Fe=u(),Me=d("div"),Be=d("p"),He=h(it),$e=u(),p(n,"class","svelte-1rz8qbw"),p(r,"class","svelte-1rz8qbw"),p(T,"class","svelte-1rz8qbw"),p(I,"class","svelte-1rz8qbw"),p(q,"class","svelte-1rz8qbw"),p(M,"class","svelte-1rz8qbw"),p(W,"class","svelte-1rz8qbw"),p(X,"class","svelte-1rz8qbw"),p(K,"class","svelte-1rz8qbw"),p(te,"class","svelte-1rz8qbw"),p(O,"class","svelte-1rz8qbw"),p(ce,"class","svelte-1rz8qbw"),p(de,"class","svelte-1rz8qbw"),p(Pe,"class","svelte-1rz8qbw"),p(ye,"class","svelte-1rz8qbw"),p(Ae,"class","svelte-1rz8qbw"),p(xe,"class","svelte-1rz8qbw"),p(Le,"class","svelte-1rz8qbw"),p(Ce,"class","svelte-1rz8qbw"),p(oe,"class","svelte-1rz8qbw"),p(x,"class","mods svelte-1rz8qbw"),p(Be,"class","svelte-1rz8qbw"),p(Me,"class","description svelte-1rz8qbw"),p(t,"class","svelte-1rz8qbw")},m(e,l){c(e,t,l),s(t,n),s(n,a),s(t,i),s(t,r),s(r,o),s(r,m),s(r,f),s(r,g),s(r,y),s(r,b),s(r,_),s(r,S),s(r,v),s(r,w),s(r,A),s(t,E),s(t,x),s(x,O),s(O,R),s(R,T),s(R,N),s(R,I),s(I,L),s(I,D),s(I,C),s(O,U),s(O,k),s(k,q),s(k,F),s(k,M),s(M,B),s(M,H),s(M,$),s(O,z),s(O,V),s(V,W),s(V,Y),s(V,X),s(X,Q),s(X,J),s(X,j),s(O,G),s(O,Z),s(Z,K),s(Z,ee),s(Z,te),s(te,ne),s(te,ae),s(te,ie),s(x,re),s(x,oe),s(oe,se),s(se,ce),s(se,le),s(se,de),s(de,he),s(de,ue),s(de,me),s(oe,pe),s(oe,fe),s(fe,Pe),s(fe,ge),s(fe,ye),s(ye,be),s(ye,_e),s(ye,Se),s(oe,ve),s(oe,we),s(we,Ae),s(we,Ee),s(we,xe),s(xe,Oe),s(xe,Re),s(xe,Te),s(oe,Ne),s(oe,Ie),s(Ie,Le),s(Ie,De),s(Ie,Ce),s(Ce,Ue),s(Ce,ke),s(Ce,qe),s(t,Fe),s(t,Me),s(Me,Be),s(Be,He),s(t,$e)},p(e,t){1&t&&ze!==(ze=e[20].name+"")&&P(a,ze),1&t&&Ve!==(Ve=e[20].id+"")&&P(m,Ve),1&t&&We!==(We=e[20].value+"")&&P(y,We),1&t&&Qe!==(Qe=Array.from(new Uint8Array(e[20].buffer)).map(Xe)+"")&&P(S,Qe),1&t&&Je!==(Je=new Uint8Array(e[20].buffer).toString()+"")&&P(A,Je),1&t&&je!==(je=Ye(e[10](e[20].value))+"")&&P(L,je),1&t&&Ge!==(Ge=Ye(e[10](e[20].mods.env))+"")&&P(B,Ge),1&t&&Ze!==(Ze=Ye(e[10](e[20].mods.pressure))+"")&&P(Q,Ze),1&t&&Ke!==(Ke=Ye(e[10](e[20].mods.a))+"")&&P(ne,Ke),1&t&&et!==(et=Ye(e[10](e[20].mods.b))+"")&&P(he,et),1&t&&tt!==(tt=Ye(e[10](e[20].mods.x))+"")&&P(be,tt),1&t&&nt!==(nt=Ye(e[10](e[20].mods.y))+"")&&P(Oe,nt),1&t&&at!==(at=Ye(e[10](e[20].mods.random))+"")&&P(Ue,at),1&t&&it!==(it=e[20].description+"")&&P(He,it)},d(e){e&&l(t)}}}function We(t){let n,i,r,o,b,_,S,v,w,A,E,x,O,R,T,N,I,L,D,C,U,k,q,F,M,B,H,$,z,V,W,Y=t[0].state+"",X=t[3]&&Be(t),Q=!t[1]&&He();function J(e,t){return e[0].context.patch?ze:$e}let j=J(t),G=j(t);return{c(){n=d("main"),i=d("h1"),i.textContent="Plinky WebUSB playground",r=u(),o=d("h2"),b=h("Current state: "),_=h(Y),S=u(),X&&X.c(),v=u(),Q&&Q.c(),w=u(),A=d("button"),E=h("Connect"),x=u(),O=d("div"),R=d("h2"),R.textContent="Patch",T=u(),N=d("p"),N.textContent="Per-patch operations - you can load and save patches on the device.",I=u(),L=d("label"),L.textContent="Patch number (zero index, 0-31)",D=u(),C=d("input"),U=u(),k=d("button"),q=h("Load patch"),F=u(),M=d("button"),B=h("Save patch"),H=u(),$=d("h2"),$.textContent="Current patch",z=u(),G.c(),p(i,"class","svelte-1rz8qbw"),y(A,"display",t[1]?"none":"block"),p(A,"class","svelte-1rz8qbw"),p(L,"for","i-patch-number"),p(C,"min","0"),p(C,"max","32"),p(C,"type","number"),C.disabled=t[2],p(C,"id","i-patch-number"),k.disabled=t[2],p(k,"class","svelte-1rz8qbw"),M.disabled=t[2],p(M,"class","svelte-1rz8qbw"),y(O,"display",t[1]?"block":"none"),p(n,"class","svelte-1rz8qbw")},m(e,a){c(e,n,a),s(n,i),s(n,r),s(n,o),s(o,b),s(o,_),s(n,S),X&&X.m(n,null),s(n,v),Q&&Q.m(n,null),s(n,w),s(n,A),s(A,E),s(n,x),s(n,O),s(O,R),s(O,T),s(O,N),s(O,I),s(O,L),s(O,D),s(O,C),g(C,t[0].context.patchNumber),s(O,U),s(O,k),s(k,q),s(O,F),s(O,M),s(M,B),s(n,H),s(n,$),s(n,z),G.m(n,null),V||(W=[m(A,"click",t[6]),m(C,"input",t[11]),m(k,"click",t[7]),m(M,"click",t[8])],V=!0)},p(e,[t]){1&t&&Y!==(Y=e[0].state+"")&&P(_,Y),e[3]?X?X.p(e,t):(X=Be(e),X.c(),X.m(n,v)):X&&(X.d(1),X=null),e[1]?Q&&(Q.d(1),Q=null):Q||(Q=He(),Q.c(),Q.m(n,w)),2&t&&y(A,"display",e[1]?"none":"block"),4&t&&(C.disabled=e[2]),1&t&&f(C.value)!==e[0].context.patchNumber&&g(C,e[0].context.patchNumber),4&t&&(k.disabled=e[2]),4&t&&(M.disabled=e[2]),2&t&&y(O,"display",e[1]?"block":"none"),j===(j=J(e))&&G?G.p(e,t):(G.d(1),G=j(e),G&&(G.c(),G.m(n,null)))},i:e,o:e,d(e){e&&l(n),X&&X.d(),Q&&Q.d(),G.d(),V=!1,a(W)}}}function Ye(e){return Math.round(100*e+Number.EPSILON)/100}const Xe=e=>e.toString(16);function Qe(e,t,n){let a,i,r,s,c;const{store:l,send:d,service:h}=Fe;o(e,l,(e=>n(0,c=e))),S((()=>{let e=new URL(document.location).searchParams.get("p");if(e){const a=(n=decodeURIComponent(e),t=n.split("").map(((e,t,n)=>t%2?void 0:new Array(2+parseInt(n[t+1],36)).join(e))).join(""),Uint8Array.from(atob(t),ye));console.log("patch: ",e,a),d({type:"parsePatch",patch:a})}var t,n}));return e.$$.update=()=>{1&e.$$.dirty&&n(1,a=["connected","loadPatch","savePatch"].indexOf(c.state)>-1),1&e.$$.dirty&&n(2,i=["loadPatch","savePatch"].indexOf(c.state)>-1),1&e.$$.dirty&&n(3,r=["error"].indexOf(c.state)>-1),1&e.$$.dirty&&n(4,s=location.protocol+"//"+location.host+location.pathname+"?p="+encodeURIComponent((e=>{const t=[];for(let n=0,{length:a}=e;n<a;n++)t.push(ge(e[n]));return btoa(t.join(""))})(new Uint8Array(c.context.patch)).split("").reduce(((e,t)=>(e[e.length-2]===t&&e[e.length-1]<35?e[e.length-1]++:e.push(t,0),e)),[]).map((e=>"number"==typeof e?e.toString(36):e)).join("")))},[c,a,i,r,s,l,async function(){d("connect")},function(){d({type:"loadPatch",patchNumber:c.context.patchNumber})},function(){d({type:"savePatch",patchNumber:c.context.patchNumber})},function(){const e=window.location.toString();e.indexOf("?")>0&&window.history.replaceState({},document.title,e.substring(0,e.indexOf("?"))),d({type:"clearPatch"})},function(e){return(e- -1024)/2048*200-100},function(){c.context.patchNumber=f(this.value),l.set(c)}]}return new class extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),U(this,e,Qe,We,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
